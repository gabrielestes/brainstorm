{"version":3,"sources":["../../src/js/game.js"],"names":["$","document","ready","on","removeClass","addClass","toggleClass","hover","css","allRaindrops","interval","frequencyIncrese","rainSpeed","increaseSpeedInterval","gameDuration","currentGameScore","audio","Audio","play","pause","makeItRain","event","keyCode","preventDefault","userSolution","val","checkAnswers","hide","Raindrop","setFocus","hideCursor","runGame","setRainSpeed","cursor","setTimeout","mousemove","input","attr","focus","setInterval","endGame","siblings","remove","clearInterval","alert","pushValues","submit","numSolution","Number","correctOperators","index","length","drop","values","solution","splice","self","stop","push","operator","scoreSolution","operators","scoreValue","multiplier","postScore","text","firstNumber","secondNumber","init","generateProblem","createRaindrop","rainFall","prototype","generateOperator","operNumber","Math","ceil","random","generateNumbers","genNumAddSub","genNumMultiply","genNumDivide","operand1","operand2","operand","divider","posLeft","prepend","first","animate"],"mappings":";;AAAAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;;AAEzB;AACAF,MAAE,UAAF,EAAcG,EAAd,CAAiB,OAAjB,EAA0B,GAA1B,EAA+B,YAAW;AACtCH,UAAE,GAAF,EAAOI,WAAP,CAAmB,QAAnB;AACAJ,UAAE,IAAF,EAAQK,QAAR,CAAiB,QAAjB;AACH,KAHD;AAIAL,MAAE,QAAF,EAAYG,EAAZ,CAAe,OAAf,EAAwB,QAAxB,EAAkC,YAAW;AACzCH,UAAE,IAAF,EAAQM,WAAR,CAAoB,QAApB;AACAN,UAAE,WAAF,EAAeM,WAAf,CAA2B,QAA3B;AACH,KAHD;AAIAN,MAAE,SAAF,EAAaO,KAAb,CACI,YAAW;AACPP,UAAE,YAAF,EAAgBQ,GAAhB,CAAoB,SAApB,EAA+B,OAA/B;AACAR,UAAE,QAAF,EAAYQ,GAAZ,CAAgB,SAAhB,EAA2B,MAA3B;AACH,KAJL,EAKI,YAAW;AACPR,UAAE,YAAF,EAAgBQ,GAAhB,CAAoB,SAApB,EAA+B,MAA/B;AACAR,UAAE,QAAF,EAAYQ,GAAZ,CAAgB,SAAhB,EAA2B,OAA3B;AACH,KARL;;AAUA;;AAEA,QAAIC,eAAe,EAAnB;AACA;AACA,QAAIC,WAAW,IAAf;AACA;AACA,QAAIC,mBAAmB,EAAvB;AACA;AACA,QAAIC,YAAY,KAAhB;AACA;AACA,QAAIC,wBAAwB,KAA5B;AACA,QAAIC,eAAe,IAAnB;AACA,QAAIC,mBAAmB,CAAvB;AACA,QAAIC,QAAQ,IAAIC,KAAJ,CAAU,wCAAV,CAAZ;;AAEA;AACAjB,MAAE,cAAF,EAAkBG,EAAlB,CAAqB,OAArB,EAA8B,YAAW;AACrCH,UAAE,IAAF,EAAQM,WAAR,CAAoB,QAApB;AACA,YAAIU,MAAME,IAAN,EAAJ,EAAkB;AAClBF,kBAAMG,KAAN;AACD,SAFC,MAEK;AACLH,kBAAME,IAAN;AACD;AACF,KAPD;;AASA;AACAlB,MAAE,aAAF,EAAiBG,EAAjB,CAAoB,OAApB,EAA6B,YAAW;AACpC;AACAiB;AACH,KAHD;;AAKA;AACApB,MAAE,MAAF,EAAUG,EAAV,CAAa,UAAb,EAAyB,iBAAzB,EAA4C,UAASkB,KAAT,EAAgB;AACxD,YAAIA,MAAMC,OAAN,KAAkB,EAAtB,EAA0B;AACtBD,kBAAME,cAAN;AACA,gBAAIC,eAAexB,EAAE,IAAF,EAAQyB,GAAR,EAAnB;AACAC,yBAAaF,YAAb;AACAxB,cAAE,IAAF,EAAQyB,GAAR,CAAY,EAAZ;AACH;AACJ,KAPD;;AASA;AACA,aAASL,UAAT,GAAsB;AAClBpB,UAAE,aAAF,EAAiB2B,IAAjB;AACA,YAAIC,QAAJ;AACAC;AACAC;AACAC;AACAC;AACH;;AAED,aAASF,UAAT,GAAsB;AAClB9B,UAAE,MAAF,EAAUQ,GAAV,CAAc;AACVyB,oBAAQ;AADE,SAAd;AAGAC,mBAAW,YAAW;AAClBlC,cAAE,iBAAF,EAAqBmC,SAArB,CAA+B,YAAW;AACtCnC,kBAAE,MAAF,EAAUQ,GAAV,CAAc;AACVyB,4BAAQ;AADE,iBAAd;AAGH,aAJD;AAKH,SAND,EAMG,GANH;AAQH;;AAED,aAASJ,QAAT,GAAoB;AAChB,YAAIO,QAAQpC,EAAE,iBAAF,CAAZ;AACAoC,cAAMC,IAAN,CAAW,UAAX,EAAuB,KAAvB;AACAD,cAAME,KAAN;AACH;;AAED,aAASP,OAAT,GAAmB;AACfjB,uBAAeyB,YAAY,YAAW;AAClC,gBAAIb,YAAJ,EAAkB;AACd,oBAAIE,QAAJ;AACAlB,4BAAYC,gBAAZ;AACH;AACJ,SALc,EAKZD,QALY,CAAf;AAMH;;AAED,aAASsB,YAAT,GAAwB;AACpBO,oBAAY,YAAW;AACnB3B,yBAAa,GAAb;AACA,mBAAOA,SAAP;AACH,SAHD,EAGGC,qBAHH;AAIH;;AAED,aAAS2B,OAAT,GAAmB;AACfxC,UAAE,IAAF,EAAQyC,QAAR,CAAiB,YAAjB,EAA+BC,MAA/B;AACA1C,UAAE,iBAAF,EAAqBqC,IAArB,CAA0B,UAA1B,EAAsC,IAAtC;AACAM,sBAAc7B,YAAd;AACA8B,cAAM,WAAN;AACAC;AACA;AACA;AACH;;AAED,aAASA,UAAT,GAAsB;AAClB7C,UAAE,gBAAF,EAAoByB,GAApB,CAAwBV,gBAAxB;AACAf,UAAE,mBAAF,EAAuB8C,MAAvB;AACH;;AAEL;AACI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAASpB,YAAT,CAAsBF,YAAtB,EAAoC;AAChC,YAAI,CAACA,YAAL,EAAmB;AACf,mBAAO,IAAP;AACH;AACD,YAAIuB,cAAcC,OAAOxB,YAAP,CAAlB;AACA,YAAIyB,mBAAmB,EAAvB;AACA,aAAK,IAAIC,QAAQzC,aAAa0C,MAAb,GAAsB,CAAvC,EAA0CD,SAAS,CAAnD,EAAsDA,OAAtD,EAA+D;AAC3D,gBAAIE,OAAO3C,aAAayC,KAAb,CAAX;AACA,gBAAIE,KAAKC,MAAL,CAAYC,QAAZ,KAAyBP,WAA7B,EAA0C;AACtCtC,6BAAa8C,MAAb,CAAoBL,KAApB,EAA2B,CAA3B;AACAE,qBAAKI,IAAL,CAAUd,MAAV,GAAmBe,IAAnB;AACAR,iCAAiBS,IAAjB,CAAsBN,KAAKC,MAAL,CAAYM,QAAlC;AACH;AACJ;AACDC,sBAAcX,gBAAd;AACAzB,uBAAe,IAAf;AACAuB,sBAAc,IAAd;AACH;;AAED,aAASa,aAAT,CAAuBC,SAAvB,EAAkC;AAC9B,YAAIC,aAAa,CAAjB;AACA,YAAID,UAAUV,MAAV,KAAqB,CAAzB,EAA4B;AACxBW,yBAAa,WAAb;AACH,SAFD,MAEO;AACH,gBAAIC,aAAaF,UAAUV,MAA3B;AACA,iBAAK,IAAID,QAAQ,CAAjB,EAAoBA,QAAQW,UAAUV,MAAtC,EAA8CD,OAA9C,EAAuD;AACnD,wBAAQW,UAAUX,KAAV,CAAR;AACI,yBAAK,GAAL;AACIY,sCAAc,OAAOC,UAArB;AACA;AACJ,yBAAK,GAAL;AACID,sCAAc,OAAOC,UAArB;AACA;AACJ,yBAAK,GAAL;AACID,sCAAc,OAAOC,UAArB;AACA;AACJ,yBAAK,GAAL;AACID,sCAAc,OAAOC,UAArB;AACA;AACJ;AACInB,8BAAM,sBAAN;AACA;AAfR;AAiBH;AACDmB,yBAAa,CAAb;AACH;AACDC,kBAAUF,UAAV;AACH;;AAED,aAASE,SAAT,CAAmBF,UAAnB,EAA+B;AAC3B,YAAIA,eAAe,WAAnB,EAAgC;AAC5B9D,cAAE,iBAAF,EAAqBiE,IAArB,CAA0BH,UAA1B;AACH,SAFD,MAEO;AACH9D,cAAE,iBAAF,EAAqBiE,IAArB,CAA0B,eAAe,IAAf,GAAsB,GAAtB,GAA4BH,UAAtD;AACA/C,gCAAoB+C,UAApB;AACA9D,cAAE,gBAAF,EAAoBiE,IAApB,CAAyB,YAAY,IAAZ,GAAmBlD,gBAA5C;AACH;AAEJ;;AAED;AACA,aAASa,QAAT,GAAoB;AAChB,aAAKyB,MAAL,GAAc;AACVa,yBAAa,IADH;AAEVC,0BAAc,IAFJ;AAGVR,sBAAU,IAHA;AAIVL,sBAAU;AAJA,SAAd;;AAOA,aAAKc,IAAL,GAAY,YAAW;AACnB,iBAAKC,eAAL;AACA,iBAAKb,IAAL,GAAY,KAAKc,cAAL,EAAZ;AACA,iBAAKC,QAAL,CAAc,KAAKf,IAAnB,EAAyB5C,SAAzB;AACAH,yBAAaiD,IAAb,CAAkB,IAAlB;AACH,SALD;AAMA,aAAKU,IAAL;AACH;;AAED;AACAxC,aAAS4C,SAAT,GAAqB;AACjBC,0BAAkB,4BAAW;AACzB,gBAAId,WAAW,EAAf;AACA,gBAAIe,aAAaC,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,CAA1B,CAAjB;AACA,gBAAIH,eAAe,CAAnB,EAAsB;AAClBf,2BAAW,GAAX;AACH,aAFD,MAEO,IAAIe,eAAe,CAAnB,EAAsB;AACzBf,2BAAW,GAAX;AACH,aAFM,MAEA,IAAIe,eAAe,CAAnB,EAAsB;AACzBf,2BAAW,GAAX;AACH,aAFM,MAEA;AACHA,2BAAW,GAAX;AACH;AACD,iBAAKN,MAAL,CAAYM,QAAZ,GAAuBA,QAAvB;AACA,mBAAOA,QAAP;AACH,SAfgB;;AAiBjBmB,yBAAiB,yBAASnB,QAAT,EAAmB;AAChC,gBAAIA,aAAa,GAAb,IAAoBA,aAAa,GAArC,EAA0C;AACtC,qBAAKoB,YAAL;AACH,aAFD,MAEO,IAAIpB,aAAa,GAAjB,EAAsB;AACzB,qBAAKqB,cAAL;AACH,aAFM,MAEA;AACH,qBAAKC,YAAL;AACH;AACJ,SAzBgB;;AA2BjBF,sBAAc,wBAAW;AACrB,gBAAIG,WAAWP,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAA1B,CAAf;AAAA,gBACIM,WAAWR,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAA1B,CADf;AAEA,iBAAKxB,MAAL,CAAYa,WAAZ,GAA0BgB,QAA1B;AACA,iBAAK7B,MAAL,CAAYc,YAAZ,GAA2BgB,QAA3B;AACH,SAhCgB;;AAkCjBH,wBAAgB,0BAAW;AACvB,gBAAII,UAAUT,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAA1B,CAAd;AAAA,gBACId,aAAaY,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAA1B,CADjB;AAEA,iBAAKxB,MAAL,CAAYa,WAAZ,GAA0BkB,OAA1B;AACA,iBAAK/B,MAAL,CAAYc,YAAZ,GAA2BJ,UAA3B;AACH,SAvCgB;;AAyCjBkB,sBAAc,wBAAW;AACrB,gBAAII,UAAUV,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAA1B,CAAd;AACA,gBAAIO,UAAWT,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAA1B,CAAD,GAAkCQ,OAAhD;AACA,iBAAKhC,MAAL,CAAYa,WAAZ,GAA0BkB,OAA1B;AACA,iBAAK/B,MAAL,CAAYc,YAAZ,GAA2BkB,OAA3B;AACH,SA9CgB;;AAgDjBhB,yBAAiB,2BAAW;AACxB,iBAAKS,eAAL,CAAqB,KAAKL,gBAAL,EAArB;AACA,gBAAInB,WAAW,IAAf;AAAA,gBACIK,WAAW,KAAKN,MAAL,CAAYM,QAD3B;AAAA,gBAEIO,cAAc,KAAKb,MAAL,CAAYa,WAF9B;AAAA,gBAGIC,eAAe,KAAKd,MAAL,CAAYc,YAH/B;AAIA,oBAAQR,QAAR;AACI,qBAAK,GAAL;AACIL,+BAAWY,cAAcC,YAAzB;AACA;AACJ,qBAAK,GAAL;AACIb,+BAAWY,cAAcC,YAAzB;AACA;AACJ,qBAAK,GAAL;AACIb,+BAAWY,cAAcC,YAAzB;AACA;AACJ;AACIb,+BAAWY,cAAcC,YAAzB;AAXR;AAaA,iBAAKd,MAAL,CAAYC,QAAZ,GAAuBA,QAAvB;AACH,SApEgB;;AAsEjBgB,wBAAgB,0BAAW;AACvB,gBAAIgB,UAAUX,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAgB,EAAhB,GAAqB,EAA/B,CAAd;AACA7E,cAAE,iBAAF,EAAqBuF,OAArB,CAA6BvF,EAAE,QAAF,EAAYK,QAAZ,CAAqB,UAArB,EAAiCG,GAAjC,CAAqC;AAC9D,wBAAQ8E,UAAU;AAD4C,aAArC,EAE1BrB,IAF0B,CAErB,KAAKZ,MAAL,CAAYa,WAAZ,GAA0B,KAAKb,MAAL,CAAYM,QAAtC,GAAiD,KAAKN,MAAL,CAAYc,YAFxC,CAA7B;AAGA,mBAAOnE,EAAE,WAAF,EAAewF,KAAf,EAAP;AACH,SA5EgB;;AA8EjBjB,kBAAU,kBAASnB,IAAT,EAAexC,SAAf,EAA0B;AAChCZ,cAAEoD,IAAF,EAAQqC,OAAR,CAAgB;AACZ,uBAAO;AADK,aAAhB,EAEG7E,SAFH,EAEc,YAAW;AACrB4B;AACH,aAJD;AAKH;AApFgB,KAArB;AAsFH,CAzSD","file":"game.js","sourcesContent":["$(document).ready(function() {\n\n    // nav and header event handlers\n    $('nav.menu').on('click', 'a', function() {\n        $('a').removeClass('active');\n        $(this).addClass('active');\n    });\n    $('header').on('click', 'a.menu', function() {\n        $(this).toggleClass('active');\n        $('.drop-nav').toggleClass('active');\n    });\n    $('h1.logo').hover(\n        function() {\n            $('.lightning').css('display', 'block');\n            $('.storm').css('display', 'none');\n        },\n        function() {\n            $('.lightning').css('display', 'none');\n            $('.storm').css('display', 'block');\n        });\n\n    //GLOBAL VARIABLES\n\n    var allRaindrops = [];\n    //this is the interval between the creation of new drops\n    var interval = 3000;\n    //this is the rate by which interval is decreased when each drop is made\n    var frequencyIncrese = 70;\n    //this is the amount of time(ms) that it take a drop to reach the bottom when the game begins\n    var rainSpeed = 14000;\n    //this is the amount of time(ms) which elapse before the fall speed increases\n    var increaseSpeedInterval = 30000;\n    var gameDuration = null;\n    var currentGameScore = 0;\n    var audio = new Audio('embedded music/01 Heartbeats [DVD].mp3');\n\n    //Mute button functionality\n    $('.mute-button').on('click', function() {\n        $(this).toggleClass('active');\n        if (audio.play()) {\n        audio.pause();\n      } else {\n        audio.play();\n      }\n    });\n\n    //Start Game button\n    $('.start-game').on('click', function() {\n        // audio.play();\n        makeItRain();\n    });\n\n    //Solution-field\n    $('form').on('keypress', '.solution-field', function(event) {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n            var userSolution = $(this).val();\n            checkAnswers(userSolution);\n            $(this).val('');\n        }\n    });\n\n    //Game FUNCTIONS\n    function makeItRain() {\n        $('.start-game').hide();\n        new Raindrop();\n        setFocus();\n        hideCursor();\n        runGame();\n        setRainSpeed();\n    }\n\n    function hideCursor() {\n        $('html').css({\n            cursor: 'none'\n        });\n        setTimeout(function() {\n            $('.game-container').mousemove(function() {\n                $('html').css({\n                    cursor: 'auto'\n                });\n            });\n        }, 300);\n\n    }\n\n    function setFocus() {\n        var input = $('.solution-field');\n        input.attr(\"readonly\", false);\n        input.focus();\n    }\n\n    function runGame() {\n        gameDuration = setInterval(function() {\n            if (checkAnswers) {\n                new Raindrop();\n                interval -= frequencyIncrese;\n            }\n        }, interval);\n    }\n\n    function setRainSpeed() {\n        setInterval(function() {\n            rainSpeed -= 500;\n            return rainSpeed;\n        }, increaseSpeedInterval);\n    }\n\n    function endGame() {\n        $(this).siblings('.raindrops').remove();\n        $('.solution-field').attr(\"readonly\", true);\n        clearInterval(gameDuration);\n        alert(\"GAME OVER\");\n        pushValues();\n        // reset();\n        // $('.start-game').show().val('Play Again');\n    }\n\n    function pushValues() {\n        $('.score-to-send').val(currentGameScore);\n        $('.score-submission').submit();\n    }\n\n//Page refresh on form submission makes this funciton superfluous, but I'm leaving it in because I would eventually like to preventDefault and use this for smoother gameplay\n    // function reset() {\n    //     allRaindrops = [];\n    //     interval = 3000;\n    //     gameDuration = null;\n    //     currentGameScore = 0;\n    //     rainSpeed = 14000;\n    // }\n\n    function checkAnswers(userSolution) {\n        if (!userSolution) {\n            return true;\n        }\n        var numSolution = Number(userSolution);\n        var correctOperators = [];\n        for (var index = allRaindrops.length - 1; index >= 0; index--) {\n            var drop = allRaindrops[index];\n            if (drop.values.solution === numSolution) {\n                allRaindrops.splice(index, 1);\n                drop.self.remove().stop();\n                correctOperators.push(drop.values.operator);\n            }\n        }\n        scoreSolution(correctOperators);\n        userSolution = null;\n        numSolution = null;\n    }\n\n    function scoreSolution(operators) {\n        var scoreValue = 0;\n        if (operators.length === 0) {\n            scoreValue = \"incorrect\";\n        } else {\n            var multiplier = operators.length;\n            for (var index = 0; index < operators.length; index++) {\n                switch (operators[index]) {\n                    case \"+\":\n                        scoreValue += 1000 * multiplier;\n                        break;\n                    case \"-\":\n                        scoreValue += 1500 * multiplier;\n                        break;\n                    case \"*\":\n                        scoreValue += 2000 * multiplier;\n                        break;\n                    case \"/\":\n                        scoreValue += 2500 * multiplier;\n                        break;\n                    default:\n                        alert(\"Something went wrong\");\n                        break;\n                }\n            }\n            multiplier = 0;\n        }\n        postScore(scoreValue);\n    }\n\n    function postScore(scoreValue) {\n        if (scoreValue === \"incorrect\") {\n            $('.solution-score').text(scoreValue);\n        } else {\n            $('.solution-score').text(\"CORRECT! :\" + \"\\n\" + \"+\" + scoreValue);\n            currentGameScore += scoreValue;\n            $('.current-score').text(\"SCORE :\" + \"\\n\" + currentGameScore);\n        }\n\n    }\n\n    //CONTRUCTORS\n    function Raindrop() {\n        this.values = {\n            firstNumber: null,\n            secondNumber: null,\n            operator: null,\n            solution: null\n        };\n\n        this.init = function() {\n            this.generateProblem();\n            this.self = this.createRaindrop();\n            this.rainFall(this.self, rainSpeed);\n            allRaindrops.push(this);\n        };\n        this.init();\n    }\n\n    //PROTOTYPES\n    Raindrop.prototype = {\n        generateOperator: function() {\n            var operator = \"\";\n            var operNumber = Math.ceil(Math.random() * 4);\n            if (operNumber === 1) {\n                operator = \"+\";\n            } else if (operNumber === 2) {\n                operator = \"-\";\n            } else if (operNumber === 3) {\n                operator = \"*\";\n            } else {\n                operator = \"/\";\n            }\n            this.values.operator = operator;\n            return operator;\n        },\n\n        generateNumbers: function(operator) {\n            if (operator === \"+\" || operator === \"-\") {\n                this.genNumAddSub();\n            } else if (operator === \"*\") {\n                this.genNumMultiply();\n            } else {\n                this.genNumDivide();\n            }\n        },\n\n        genNumAddSub: function() {\n            var operand1 = Math.ceil(Math.random() * 20),\n                operand2 = Math.ceil(Math.random() * 15);\n            this.values.firstNumber = operand1;\n            this.values.secondNumber = operand2;\n        },\n\n        genNumMultiply: function() {\n            var operand = Math.ceil(Math.random() * 15),\n                multiplier = Math.ceil(Math.random() * 10);\n            this.values.firstNumber = operand;\n            this.values.secondNumber = multiplier;\n        },\n\n        genNumDivide: function() {\n            var divider = Math.ceil(Math.random() * 12);\n            var operand = (Math.ceil(Math.random() * 13)) * divider;\n            this.values.firstNumber = operand;\n            this.values.secondNumber = divider;\n        },\n\n        generateProblem: function() {\n            this.generateNumbers(this.generateOperator());\n            var solution = null,\n                operator = this.values.operator,\n                firstNumber = this.values.firstNumber,\n                secondNumber = this.values.secondNumber;\n            switch (operator) {\n                case \"+\":\n                    solution = firstNumber + secondNumber;\n                    break;\n                case \"-\":\n                    solution = firstNumber - secondNumber;\n                    break;\n                case \"*\":\n                    solution = firstNumber * secondNumber;\n                    break;\n                default:\n                    solution = firstNumber / secondNumber;\n            }\n            this.values.solution = solution;\n        },\n\n        createRaindrop: function() {\n            var posLeft = Math.ceil(Math.random() * 69 + 13);\n            $('.game-container').prepend($('<div/>').addClass('raindrop').css({\n                'left': posLeft + '%'\n            }).text(this.values.firstNumber + this.values.operator + this.values.secondNumber));\n            return $('.raindrop').first();\n        },\n\n        rainFall: function(drop, rainSpeed) {\n            $(drop).animate({\n                \"top\": \"87%\"\n            }, rainSpeed, function() {\n                endGame();\n            });\n        }\n    };\n});\n"]}